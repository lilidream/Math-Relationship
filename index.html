<html>
<meta charset="utf-8">

<head>
	<style>
		.c {
			width: 1000px;
			height: 800px;
			margin: 10px auto;
			border: 1px solid #BBBBBB;
			border-radius: 15px;
		}

		body {
			margin: 0 auto;
			width: 1800px;
			display: flex;
			justify-content: space-around;
			flex-wrap: wrap;
			font-family: Fira Code, monospace;
			font-size: 14px;
		}

		.title {
			width: 100%;
			height: 50px;
			text-align: center;
			font-size: 25px;
			line-height: 50px;
		}
		.load{
			width: 100%;
			text-align: center;
		}
		.nodesBox{
			width: 730px;
			height: 800px;
			overflow-y: scroll;
			padding: 10px;
			background-color: #f5f5f5;
			box-shadow: inset 0 0 10px 0px #00000011;
			border-radius: 10px;
			margin: 30px auto;
			display: flex;
			flex-wrap: wrap;
			justify-content: space-between;
			align-content: flex-start;
			align-items: center;
			position: relative;
		}
		.nodes{
			width: fit-content;
			margin: 5px;
			border-radius: 5px;
			box-shadow: 0 0 15px 0px #0000001a;
			background-color: white;
			overflow: hidden;
			max-width: 70%;
		}
		.nodesTitle{
			display: flex;
			justify-content: baseline;
			background-color:#bbd3bb;
			border-radius: 5px 5px 0 0;
		}
		.nodesTitle div{
			width: fit-content;
			line-height: 20px;
			margin: 0 5px;
		}
		.nodesEqu{
			width: fit-content;
			min-width: 100%;
			font-size: 20px;
			display: flex;
			justify-content: center;
			max-height: 40px;
			margin: 5px 0;
		}
		.nodesLink{
			width: 100%;
			display: flex;
			justify-content: baseline;
			flex-direction: column;
		}
		.nodeId{
			padding: 0 5px;
			color: white;
			border-radius: 5px 0 0 0;
			line-height: 22px;
		}
		.nodeLabel{
			border-radius: 0 5px 0 0;
			padding: 0 5px;
		}
		.nodeId{
			background-color: #77a577;
		}
		.toType1, .toType2, .toTypeFrom{
			color: black;
			width: 100%;
		}
		.toType1{
			background-color: #c2d0e5;
		}
		.toType2{
			background-color: #d1b9cf;
		}
		.toTypeFrom{
			background-color: #dbbfa8;
		}
		.toType1 span, .toType2 span, .toTypeFrom span{
			padding: 0 3px ;
		}
		.toType1 div, .toType2 div, .toTypeFrom div{
			content: "";
			display: inline-block;
			height: 20px;
			width: 20px;
			color: white;
			vertical-align: bottom;
		}
		.toType1 div{
			background-color: #155eca;
			background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3R5bGU9J2ZpbGw6I2ZmZmZmZic+PGcgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBkYXRhLW5hbWU9ImFycm93LWZvcndhcmQiPjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDEyIDEyKSIgb3BhY2l0eT0iMCIvPjxwYXRoIGQ9Ik01IDEzaDExLjg2bC0zLjYzIDQuMzZhMSAxIDAgMCAwIDEuNTQgMS4yOGw1LTZhMS4xOSAxLjE5IDAgMCAwIC4wOS0uMTVjMC0uMDUuMDUtLjA4LjA3LS4xM0ExIDEgMCAwIDAgMjAgMTJhMSAxIDAgMCAwLS4wNy0uMzZjMC0uMDUtLjA1LS4wOC0uMDctLjEzYTEuMTkgMS4xOSAwIDAgMC0uMDktLjE1bC01LTZBMSAxIDAgMCAwIDE0IDVhMSAxIDAgMCAwLS42NC4yMyAxIDEgMCAwIDAtLjEzIDEuNDFMMTYuODYgMTFINWExIDEgMCAwIDAgMCAyeiIvPjwvZz48L2c+PC9zdmc+");

		}
		.toType2 div{
			background-color: #8b3587;
			background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3R5bGU9J2ZpbGw6I2ZmZmZmZic+PGcgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBkYXRhLW5hbWU9InN3YXAiPjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDEyIDEyKSIgb3BhY2l0eT0iMCIvPjxwYXRoIGQ9Ik00IDloMTNsLTEuNiAxLjJhMSAxIDAgMCAwLS4yIDEuNCAxIDEgMCAwIDAgLjguNCAxIDEgMCAwIDAgLjYtLjJsNC0zYTEgMSAwIDAgMCAwLTEuNTlsLTMuODYtM2ExIDEgMCAwIDAtMS4yMyAxLjU4TDE3LjA4IDdINGExIDEgMCAwIDAgMCAyeiIvPjxwYXRoIGQ9Ik0yMCAxNkg3bDEuNi0xLjJhMSAxIDAgMCAwLTEuMi0xLjZsLTQgM2ExIDEgMCAwIDAgMCAxLjU5bDMuODYgM2ExIDEgMCAwIDAgLjYxLjIxIDEgMSAwIDAgMCAuNzktLjM5IDEgMSAwIDAgMC0uMTctMS40TDYuOTIgMThIMjBhMSAxIDAgMCAwIDAtMnoiLz48L2c+PC9nPjwvc3ZnPg==");
		}
		.toTypeFrom div{
			background-color: #af7240;
			background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3R5bGU9J2ZpbGw6I2ZmZmZmZic+PGcgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBkYXRhLW5hbWU9ImFycm93LWZvcndhcmQiPjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDEyIDEyKSIgb3BhY2l0eT0iMCIvPjxwYXRoIGQ9Ik01IDEzaDExLjg2bC0zLjYzIDQuMzZhMSAxIDAgMCAwIDEuNTQgMS4yOGw1LTZhMS4xOSAxLjE5IDAgMCAwIC4wOS0uMTVjMC0uMDUuMDUtLjA4LjA3LS4xM0ExIDEgMCAwIDAgMjAgMTJhMSAxIDAgMCAwLS4wNy0uMzZjMC0uMDUtLjA1LS4wOC0uMDctLjEzYTEuMTkgMS4xOSAwIDAgMC0uMDktLjE1bC01LTZBMSAxIDAgMCAwIDE0IDVhMSAxIDAgMCAwLS42NC4yMyAxIDEgMCAwIDAtLjEzIDEuNDFMMTYuODYgMTFINWExIDEgMCAwIDAgMCAyeiIvPjwvZz48L2c+PC9zdmc+");
			float: right;
		}

		.nodeBlackBg{
			position: absolute;
			width: 100%;
			height: 100%;
			background-color: #00000071;
			left: 0;
			top: 0;
		}
		.nodeEditBox{
			width: 580px;
			height: 530px;
			padding: 10px;
			position: absolute;
			left: calc(50% - 300px);
			top: calc(50% - 275px);
			background-color: white;
			border-radius: 20px;
		}
		.nodeEditBox input{
			border: none;
			outline: none;
			background-color: #ececec;
			border-radius: 10px;
			height: 30px;
			padding: 0 5px;
		}
		.nodeEditBox textarea{
			border: none;
			outline: none;
			background-color: #ececec;
			border-radius: 10px;
			padding: 5px 5px;
			width: 90%;
			margin: 10px 5%;
			height: 100px;
		}
		.nodeEditName{
			display: flex;
			width: 100%;
			justify-content: space-around;
		}
		.nodeEditSvg{
			max-width: 100%;
			max-height: 100%;
		}
		.nodeEditSvgBox{
			width: 90%;
			margin: 10px 5%;
			border: 1px solid #BBBBBB;
			border-radius: 10px;
			height: 200px;
			overflow-x: auto;
			display: flex;
			justify-content: center;
			align-items: center;
		}
		.nodeEditLink1{
			background-color: #c2d0e5;
			padding: 3px 5px ;
			border-radius: 5px;
			margin: 3px 5px;
		}
		.nodeEditLink2{
			background-color: #d1b9cf;
			padding: 3px 5px ;
			border-radius: 5px;
			margin: 3px 5px;
		}
		.nodeEditLink3{
			background-color: #dbbfa8;
			padding: 3px 5px ;
			border-radius: 5px;
			margin: 3px 5px;
		}
		.nodeEditLinkBox, .nodeEditAddBox, .nodeEditButtonBox{
			width: 90%;
			margin: 10px 5%;
		}
		.nodeEditAddBox{
			display: flex;
			justify-content: center;
		}
		.nodeEditButtonBox{
			display: flex;
			justify-content: space-around;
		}
		.nodeEditButtonBox button{
			border: none;
			width: 150px;
			text-align: center;
			height: 40px;
			line-height: 40px;
			border-radius: 10px;
		}
	</style>

	<script id="MathJax-script" async src="es5/tex-mml-svg.js"></script>
	<script>
		MathJax = {
			tex: {
				inlineMath: [
					['$', '$'],
					['\\(', '\\)'],
					['$$', '$$']
				]
			},
			jax: ["input/TeX", "output/SVG"]
		};
	</script>
	<script src="js/g6.min.js"></script>
	<script src="js/jquery-3.3.1.min.js"></script>
	<script src="js/main.js"></script>
	<!-- <script src="js/vue.global.js"></script> -->
	<script src="https://unpkg.com/vue@next"></script>
</head>

<body>
	<div class="title">大气科学物理量与相关公式联系图</div>
	<div class="load" id="load">加载中……</div>
	<div class="c" id="fig">

	</div>
    <div class="nodesBox" id="nodesBox">
		<node-box v-for="node in nodes" v-bind:node="node" v-bind:key="node.id" @edit="nodeedit($event)"></node-box>

		<div class="nodeBlackBg" v-show="showEdit">
			<div class="nodeEditBox">
				<div class="nodeEditName">
					<div>id: <input type="text" v-model="nodeEdit.id"></div>
					<div>名称: <input type="text" v-model="nodeEdit.label"></div>
				</div>
				<textarea type="textarea" placeholder="LATEX" v-model="nodeEdit.latex"></textarea>
				<div class="nodeEditSvgBox">
					<img v-bind:src="nodeEdit.base64" class="nodeEditSvg">
				</div>
				<div class="nodeEditLinkBox">
					<div class="nodeEditLink">
						单向连接：
						<span v-for="t in nodeEdit.toType1" class="nodeEditLink1">×{{t.label}}</span>
					</div>
					<div class="nodeEditLink">
						双向连接：
						<template v-for="t in nodeEdit.toType2">
							<span v-if="t.id in nodeEdit.toId" class="nodeEditLink2">×{{t.label}}</span>
							<span v-else class="nodeEditLink3">{{t.label}}</span>
						</template>
					</div>
				</div>
				<div class="nodeEditAddBox">
					添加连接：
					<select v-model="nodeEdit.addLink1">
						<option v-for="node in nodes" :value="node.id">{{node.label}}</option>
					</select>
					<button>添加为单向</button>
					<button>添加为双向</button>
				</div>
				<div class="nodeEditButtonBox">
					<button style="background-color: #e7e7e7;" @click="showEdit=false">取消</button>
					<button style="background-color: #378137;color: white;">保存</button>
				</div>
			</div>
		</div>
    </div>

</body>

</html>



